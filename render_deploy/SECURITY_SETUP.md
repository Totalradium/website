# üîê Security Setup Guide

## Step 1: Generate Your API Keys

Run this command on your computer:
```bash
python generate_api_key.py
```

You'll get output like:
```
SYNC_API_KEY = 8f7c1b2e54ab9d1f3a92d47caa9ed8f10fbc273d2f02e147d8eaf3a8f4c9b17e
SECRET_KEY = xvz9k2m8n4p7q1w5e6r3t0y9u8i7o6p5a4s3d2f1g0h9j8k7l6m5n4b3v2c1x0z9
```

## Step 2: Local Environment Setup

Create `.env` file in your local project:
```bash
# .env (local)
SECRET_KEY=xvz9k2m8n4p7q1w5e6r3t0y9u8i7o6p5a4s3d2f1g0h9j8k7l6m5n4b3v2c1x0z9
DEBUG=True
SYNC_API_KEY=8f7c1b2e54ab9d1f3a92d47caa9ed8f10fbc273d2f02e147d8eaf3a8f4c9b17e
REMOTE_SERVER_URL=https://your-render-app.onrender.com
```

## Step 3: Render Environment Variables

In Render dashboard ‚Üí Environment:
```
SECRET_KEY = xvz9k2m8n4p7q1w5e6r3t0y9u8i7o6p5a4s3d2f1g0h9j8k7l6m5n4b3v2c1x0z9
DEBUG = False
SYNC_API_KEY = 8f7c1b2e54ab9d1f3a92d47caa9ed8f10fbc273d2f02e147d8eaf3a8f4c9b17e
DATABASE_URL = (auto-generated by Render PostgreSQL)
```

## Step 4: Update Local Settings

Add to your local `settings.py`:
```python
import os
from decouple import config

# Load from environment variables
SECRET_KEY = config('SECRET_KEY', default='django-insecure-change-this')
DEBUG = config('DEBUG', default=True, cast=bool)
SYNC_API_KEY = config('SYNC_API_KEY', default='your-secret-key')
REMOTE_SERVER_URL = config('REMOTE_SERVER_URL', default='https://your-render-app.onrender.com')
```

## Step 5: Security Features

‚úÖ **API Authentication**: All sync endpoints require Bearer token
‚úÖ **Environment Variables**: Keys stored securely, not in code
‚úÖ **HTTPS Only**: All communication encrypted
‚úÖ **Request Validation**: Malformed requests rejected
‚úÖ **Error Handling**: No sensitive data in error messages

## Step 6: Test Security

1. **Test Connection**: Use sync dashboard "Test Connection" button
2. **Wrong API Key**: Should return 401 Unauthorized
3. **Correct API Key**: Should return success message

## ‚ö†Ô∏è Security Best Practices

- **Never commit** `.env` files to Git
- **Rotate keys** periodically (generate new ones)
- **Use different keys** for development and production
- **Monitor logs** for unauthorized access attempts
- **Keep Render environment variables** private

## üîÑ Key Rotation

To change your API key:
1. Generate new key: `python generate_api_key.py`
2. Update local `.env` file
3. Update Render environment variables
4. Restart Render service
5. Update sync dashboard with new key