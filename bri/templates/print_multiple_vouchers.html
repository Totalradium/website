<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Brightway School Vouchers</title>
<style>
  body {
    font-family: "Times New Roman", serif;
    font-size: 14px;
    margin: 0;
    padding: 10px;
  }
  .voucher {
    border: 1px solid #000;
    padding: 15px;
    width: 700px;
    margin: auto;
  }
  .header {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 15px;
    position: relative;
  }
  .logo {
    height: 65px;
    position: absolute;
    left: 50px;
  }
  .header-text {
    text-align: center;
    width: 100%;
  }
  .title {
    font-weight: bold;
    font-size: 16px;
    margin: 5px 0;
  }
  .subtitle {
    text-align: center;
    font-size: 14px;
    margin-bottom: 15px;
  }
  .line {
    border-bottom: 1px solid #000;
    display: inline-block;
    min-width: 150px;
    padding: 2px 5px;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
  }
  th {
    border: 1px solid #000;
    padding: 5px;
    text-align: center;
    font-size: 14px;
    font-weight: bold;
  }
  td {
    border: 1px solid #000;
    padding: 5px;
    text-align: left;
    font-size: 14px;
  }
  .amount-col {
    width: 120px;
    text-align: right;
  }
  .footer {
    margin-top: 15px;
    display: flex;
    justify-content: space-between;
  }
  .barcode {
    text-align: center;
    margin: 10px 0;
  }
  .cut-line {
    border-top: 2px dashed #000;
    margin: 15px 0;
    text-align: center;
    position: relative;
  }
  .cut-line::before {
    content: "âœ‚";
    position: absolute;
    top: -12px;
    left: 50%;
    transform: translateX(-50%);
    background: #fff;
    padding: 0 6px;
    font-size: 12px;
    color: #000;
  }
  @media print {
    @page { size: A4; margin: 15mm; }
    body { margin: 0; padding: 0; }
    .voucher { page-break-inside: avoid; margin-bottom: 0; }
    .cut-line { border-color: #666; }
  }
</style>
</head>
<body>

{% for voucher in vouchers_data %}
<!-- Student Copy -->
<div class="voucher">
  <div class="header">
    {% load static %}
    <img src="{% static 'logo_renewed.png' %}" alt="School Logo" class="logo">
    <div class="header-text">
      <div class="title">BRIGHTWAY FOUNDATION SCHOOL AND ACADEMY</div>
      <div class="subtitle">21-UMER ROAD ISLAMPURA, LAHORE</div>
    </div>
  </div>
  <div style="text-align:center; font-weight:bold;">Student Copy</div>
  
  <p style="text-align:center;">
    Name: <span class="line">{{ voucher.student.std_fname }} {{ voucher.student.std_lname }}</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    Guardian Name: <span class="line">{{ voucher.student.guardian_name }}</span>
  </p>
  <p style="text-align:center;">
    Roll Number: <span class="line">{{ voucher.student.std_roll }}</span> &nbsp;&nbsp;&nbsp;
    Class: <span class="line">{{ voucher.student.std_class.class_name }}</span> &nbsp;&nbsp;&nbsp;
    Section: <span class="line">{{ voucher.student.std_section.std_section|default:"N/A" }}</span>
  </p>
  
  <table>
    <tr><th>Arrears</th><th class="amount-col">Amount</th></tr>
    {% for fee in voucher.arrears %}
    <tr>
      <td>{{ fee.fee.description }} - {{ fee.month }}</td>
      <td class="amount-col">PKR {{ fee.amount_due }}</td>
    </tr>
    {% endfor %}
    {% for i in "123" %}
      {% if forloop.counter > voucher.arrears|length %}
      <tr><td>&nbsp;</td><td class="amount-col">&nbsp;</td></tr>
      {% endif %}
    {% endfor %}
    <tr style="font-weight: bold;">
      <td>Total</td>
      <td class="amount-col">PKR {{ voucher.total_arrears }}</td>
    </tr>
  </table>
  
  <div class="barcode">
    <img src="data:image/png;base64,{{ voucher.barcode_data }}" alt="Barcode" style="height: 50px;">
    <br>{{ voucher.student.std_roll }}
  </div>
  
  <div class="footer">
    <span>Printed Date: {{ printed_date }}</span>
    <span>Submitted Date: ____________</span>
    <span>Cashier Signature: ____________</span>
  </div>
</div>

<!-- Cut Line -->
<div class="cut-line"></div>

<!-- Admin Copy -->
<div class="voucher">
  <div class="header">
    {% load static %}
    <img src="{% static 'logo_renewed.png' %}" alt="School Logo" class="logo">
    <div class="header-text">
      <div class="title">BRIGHTWAY FOUNDATION SCHOOL AND ACADEMY</div>
      <div class="subtitle">21-UMER ROAD ISLAMPURA, LAHORE</div>
    </div>
  </div>
  <div style="text-align:center; font-weight:bold;">Admin Copy</div>
  
  <p style="text-align:center;">
    Name: <span class="line">{{ voucher.student.std_fname }} {{ voucher.student.std_lname }}</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    Guardian Name: <span class="line">{{ voucher.student.guardian_name }}</span>
  </p>
  <p style="text-align:center;">
    Roll Number: <span class="line">{{ voucher.student.std_roll }}</span> &nbsp;&nbsp;&nbsp;
    Class: <span class="line">{{ voucher.student.std_class.class_name }}</span> &nbsp;&nbsp;&nbsp;
    Section: <span class="line">{{ voucher.student.std_section.std_section|default:"N/A" }}</span>
  </p>
  
  <table>
    <tr><th>Arrears</th><th class="amount-col">Amount</th></tr>
    {% for fee in voucher.arrears %}
    <tr>
      <td>{{ fee.fee.description }} - {{ fee.month }}</td>
      <td class="amount-col">PKR {{ fee.amount_due }}</td>
    </tr>
    {% endfor %}
    {% for i in "123" %}
      {% if forloop.counter > voucher.arrears|length %}
      <tr><td>&nbsp;</td><td class="amount-col">&nbsp;</td></tr>
      {% endif %}
    {% endfor %}
    <tr style="font-weight: bold;">
      <td>Total</td>
      <td class="amount-col">PKR {{ voucher.total_arrears }}</td>
    </tr>
  </table>
  
  <div class="barcode">
    <img src="data:image/png;base64,{{ voucher.barcode_data }}" alt="Barcode" style="height: 50px;">
    <br>{{ voucher.student.std_roll }}
  </div>
  
  <div class="footer">
    <span>Printed Date: {{ printed_date }}</span>
    <span>Submitted Date: ____________</span>
    <span>Cashier Signature: ____________</span>
  </div>
</div>
{% endfor %}

</body>
</html>
