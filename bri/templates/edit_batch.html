{% extends 'batch_management.html' %}

{% block title %}Edit Batch{% endblock %}

{% block content %}
  <h3>Edit Batch: {{ batch.class_name }}</h3>

  <form method="POST">
    {% csrf_token %}
    
    <!-- Class Selection -->
    <div class="form-group">
      <label for="class_id">Select Class</label>
      <select name="class_id" id="class_id" class="form-control" required>
        <option value="">Select Class</option>
        {% for cls in classes %}
          <option value="{{ cls.id }}" {% if cls.id == batch.class_name.id %}selected{% endif %}>{{ cls.class_name }}</option>
        {% endfor %}
      </select>
    </div>

    <!-- Editable Section Names -->
    <div class="form-group">
      <label for="sections">Edit Sections</label>
      <div id="sections-container">
        {% for sec in batch.class_name.section_set.all %}
          <div class="form-group">
            <label for="section-{{ sec.id }}">Section {{ sec.id }}:</label>
            <input type="text" name="sections[{{ sec.id }}]" id="section-{{ sec.id }}" class="form-control" value="{{ sec.std_section }}" />
          </div>
        {% endfor %}
      </div>
      <small class="form-text text-muted">Leave a section name empty to delete it.</small>
    </div>

    <button type="submit" name="update_batch" class="btn btn-primary mt-3">Update Batch</button>
  </form>

{% endblock %}
